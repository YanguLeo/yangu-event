(this.$WP=this.$WP||[]).push(["QZysVi",(e,t)=>{"use strict";var s,r,a,i,o,l,n,c,d,p,_,m,u,h,g,v,S,N,f,O,b,x,F,k,y,T,w,C,H,I,L,D,B,P,E,q=({sortOptions:e,currentSortOrder:t,onSelect:i})=>{var[o,l]=s(""),[n,d]=s("CLOSE");"OPENING"===n&&setTimeout(()=>d("OPEN"),0),"CLOSING"===n&&setTimeout(()=>d("CLOSE"),200);var u="OPEN"===n,h=()=>{"CLOSE"===n?(T({module:"List_sort",action:"click_open"}),d("OPENING"),_("hotels-sort-filter-entry").emit("openSort")):(d("CLOSING"),_("hotels-sort-filter-entry").emit("closeSort"))},g=p("info_icons_over_question_icons")?"information-circle":"question-circle";return r(a,null,r(y,{type:"standard",fullwidth:!0,onClick:h},r(m,{name:"sort",className:f("_3XI2qw7J",{_20FseP62:p("cx_brand_refresh_degreen")})}),c("mobile_sort_8e0")),"CLOSE"!==n&&r(w,{transparentBackground:!0,disableAutoFocus:!0,onClose:h},r("div",{className:f("_10D5gc0l",{"_2lr0xN-B":u}),onClick:h},r("div",{className:"_3xoEqzyV"},r("span",{onClick:h,className:"_2KzcH5LA"},r(m,{name:"times",className:f("KnOo4MTk",{_20FseP62:p("cx_brand_refresh_degreen")})})),r("span",{className:"_3oMVNd9w"},c("poi_sort_by")),e.map(e=>{var s=e.sortOrder===t,n=e.sortOrder===o||e.autoExpandTooltipMW;return r("span",{key:e.sortOrder,className:f("_1_uiigKB",{_3ICnLWve:s}),onClick:()=>!s&&i(e.sortOrder)},r(m,{name:"checkmark",className:f("vSvd8c-7",{_20FseP62:p("cx_brand_refresh_degreen")})}),C(e.displayLabel),e.tooltipText&&r(a,null,r("span",{className:"uFFNeOLD",onClick:t=>{t&&t.stopPropagation(),l(e.sortOrder)}},!e.autoExpandTooltipMW&&r(m,{name:g})),n&&r("div",{className:"_1kuVa8HR"},e.tooltipText)))})))))},M=({sortOptions:e,selectedSort:t,onSelect:l,initialSortName:n,setGlobalTooltip:d})=>{var _,u,h,[g,v]=s(""),S=p("info_icons_over_question_icons")?"information-circle":"question-circle",N=i((e,t)=>{e.stopPropagation(),v(e=>e===t?"":((e=>{T({module:"sort_h",action:"expand_tool_tip",context:e})})(t),t))},[v]),O=i(()=>{setTimeout(()=>v(""),100)},[v]),b=i((e,t)=>r(a,null,C(t?e.shortDisplayLabel:e.displayLabel),e.tooltipText&&!t&&r(a,null,r("span",{onClick:t=>N(t,e.sortOrder)},r(m,{name:S,className:"ING8LmFc"})),g===e.sortOrder&&r("div",{className:"_3Bdl28lV"},e.tooltipText))),[N,g,S]),x=o(()=>e.map(e=>t=>b(e,t)),[e,b]),F=i(t=>{l(e[t].sortOrder),O()},[l,e,O]),k=i(()=>{d(""),T({module:"sort_h",action:"dropdown_click"})},[d]),y=e.findIndex(e=>e.sortOrder===t),w=null==(_=e[y])?void 0:_.tooltipText,H=null==(u=e[y])?void 0:u.descriptionLabel,I=null==(h=e[y])?void 0:h.sortOrder;return r(a,null,c("airm_sortBy"),r("span",{className:f("_3hIZ3UDf","_10lMSzUK"),"data-sort-dropdown":!0},r(D,{options:x,selectedIndex:y,onSelect:F,allowOptionWrapping:!0,open:!1,hideSelection:!0,placeholder:n,openBelow:!0,onClick:k,onClose:O,size:"large",beneathPersistentTripSearch:!0})),w&&r(L,{below:!0,message:w,onShow:()=>{T({module:"sort_h",action:"hover",context:I})},alignEdge:"right",shiftArrow:10,shiftX:16,maxWidth:200},e=>r("span",{ref:e},H&&r("span",{className:"_2UI8fqis"},H),r(m,{name:S,className:"_3aH5lnSF"}))))},A=(e,t,s,a)=>{var i,o=S(e,t,s);return i=p("housekeeping_ux_updates")?"gray":p("hotels_filters_reskin")?"green":"default",r("div",{className:"_3Htr9y5C"},r(N,{key:"pills",selections:o,onClearSelection:a,type:i,enableRowCutoff:!0}))},W=e=>{var{os:t}=l(O);return r(B,Object.assign({os:t.family},e))},G=()=>[];return[()=>{P=H(e=>Object.assign({},e),{setGlobalTooltip:I.overlays.showTooltip})(M),E=d(" &#9679; "),B=class extends n{constructor(...e){super(...e),this.state={sortOptions:[],selectedSort:"",descHeader:{descHeaderText:"",emptyListAlert:!1,highlightAll:!1}},this.bridgeRadio=void 0,this.updateFromBridge=()=>{var e=this.bridgeRadio.request("cur_sort_ext")||this.state.selectedSort,t=this.bridgeRadio.request("desc_header_text")||this.state.descHeader,s=this.bridgeRadio.request("sort_options_ext")||this.state.sortOptions;this.setState({selectedSort:e,descHeader:t,sortOptions:s})},this.decorateDescHeader=e=>{var t=(this.state.descHeader.descHeaderText||this.props.initialDescHeader||"").replace("highlight","_3nOjB60a").replace("clear",f("_5NGxlIuK",{HITwdKmr:p("cx_brand_refresh_degreen")}));return r("div",{className:f("_2AGh2u0d",{_2XHurygs:this.state.descHeader.emptyListAlert}),onClick:t=>{var s=t&&t.target&&t.target.attributes&&t.target.attributes.getNamedItem("class");s&&s.nodeValue&&s.nodeValue.indexOf("_5NGxlIuK")>=0&&(T({module:"Filters_overall_clear",action:"unselect_link",context:"clear_all"}),e.clearAllFilters())}},this.state.descHeader.emptyListAlert&&r(m,{name:"alert",className:"MX0oKt3R"}),r("span",{className:f({_3nOjB60a:this.state.descHeader.highlightAll})},d(t)))},this.selectSort=e=>{T({module:"sort_h",action:"click",context:e}),globalThis.require(["ta/page"],t=>{t.setSortOrder(e)})},this.createAppropriateDisclaimer=e=>p("hamon_fr")?this.createHamonFrDisclaimer(e):p("cma_disclaimer")?this.createDisclaimer(e,p("exposed_text_legal_disclaimers")?c("payments_partners_impact_order_accoms_room_types_vary"):c("cma_disclaimer_teaser_msg"),c("cma_disclaimer_message")):null,this.createHamonFrDisclaimer=e=>{var t=d(c("Disclaimer_Hotel_Sort_Hamon_FR")),s=r("span",null,t,r("br",null),r("br",null),"Les prix des chambres peuvent varier.");return r(a,null,"featured"===this.state.selectedSort&&this.createDisclaimer(e,c("payments_partners_impact_order_accoms_room_types_vary"),c("cma_disclaimer_message"),null,"","prices"),this.createDisclaimer(e,c("hamon_law_more_info"),s,c("hotel_info_about_service"),"/pages/service.html","more-info"))},this.createDisclaimer=(e,t,s,i,o,l)=>{var n=`cma-opener-${e?"mobile":"desktop"}-${l?"-"+l:""}`,c=p("info_icons_over_question_icons")?"information-circle":"question-circle";return r(a,null,r(x,{name:n},e=>r("div",{className:f("_2V2Hwh7G",{MsoGdiD5:p("housekeeping_mw_ux_updates")}),onClick:e},r("span",{className:"_15X-YdXf"},t),r(m,{name:c}))),r(b,{name:n},r("div",{className:"_2X2B2pla"},s,i&&o&&r("a",{className:f("ui_button","primary","uCLwsB9S"),href:o},i))))},this.openFilter=()=>{T({module:"Filter_overall",action:"in_view"}),_("hotels-sort-filter-entry").emit("openFilters"),globalThis.require(["trjs!responsive/collapsibleLayout"],e=>{var t=p("hotel_filters_fullscreen");e.toggle(t).then(e=>{e&&(_("web-component-price-slider").emit("resize"),t&&"IOS"===this.props.os&&!k()&&window.scrollTo({top:100}))})})},this.createFilterButton=e=>{var t=e?r(a,null,r("span",{className:"_2gGW8vZ4"},E),e):null;return r(y,{type:"standard",fullwidth:!0,onClick:this.openFilter},r(m,{name:"filter",className:f("_3V91smqP",{HITwdKmr:p("cx_brand_refresh_degreen")})}),r("span",{className:"EYNxeA1n"},c("mw_sort_Filter")),t)}}componentDidMount(){this.bridgeRadio=_("web-component-data-bridge"),this.bridgeRadio.on("update",this.updateFromBridge),this.updateFromBridge()}componentWillUnmount(){this.bridgeRadio.off("update",this.updateFromBridge)}createSortOverlay(){return r(q,{sortOptions:this.state.sortOptions,currentSortOrder:this.state.selectedSort,onSelect:this.selectSort})}createMapToggle(){return r(a,null,(p("entry_point_update")||this.props.isVacationPackageServlet)&&r(F,{toggleType:"INLINE_BUTTON",disableWhileLoading:this.props.disableMapToggleWhileLoading}))}createMWHeaderButtons(e){return r(a,null,this.createSortOverlay(),this.createFilterButton(e),this.createMapToggle())}render(){var e=p("desktop_web"),{initialSelectedFilters:t,isVacationPackageServlet:s,initialSortName:i,initialAvailableFilters:o}=this.props;return r(u,null,(l,n)=>{var c,d;if(l.initialized)c=h(l.pageFilters),d=A(l.pageFilters,o,l.sharedUIState,n.clearFilter);else{var _=g.fromSelectedFilterResponse(t),m=new v(_,o,0);c=h(_),d=A(_,o,m,n.clearFilter)}return r(a,null,r("div",{className:"is-hidden-desktop MOBILE_SORT_FILTER_BUTTONS"},r("div",{className:f("_1xAxS0Gv",p("entry_point_update")||s?"_1wpbtCi2":"","kIIUy4Un")},this.createMWHeaderButtons(c)),e?this.createAppropriateDisclaimer(!0):null),!e&&this.createAppropriateDisclaimer(!0),r("div",{className:"_1q0W7sW4"},this.decorateDescHeader(n),r("div",{className:f("_24vgkQpH","is-shown-at-desktop")},r(P,{sortOptions:this.state.sortOptions,selectedSort:this.state.selectedSort,onSelect:this.selectSort,initialSortName:i}))),r("div",{className:f("_2M-kjmC_","is-shown-at-desktop")},d,this.createAppropriateDisclaimer(!1)))})}},e("default",W),e("ssrQueries",G)},[e=>(s=e.useState,r=e.createElement,a=e.Fragment,i=e.useCallback,o=e.useMemo,l=e.useContext,n=e.Component),e=>(c=e.localize,d=e.unescaped),e=>p=e.featureIsEnabled,e=>_=e.default,e=>m=e.Icon,e=>u=e.FiltersStateConsumer,e=>(h=e.getSelectedFiltersCount,g=e.PageFilters,v=e.FiltersSharedUIState,S=e.gatherSelections),e=>N=e.default,e=>f=e.default,e=>O=e.Device,e=>b=e.Modal,e=>x=e.Opener,e=>(F=e.default,k=e.getMapState),e=>y=e.default,e=>T=e.default,e=>w=e.default,e=>C=e.unescapeHtml,e=>H=e.connect,e=>I=e.actions,e=>L=e.default,e=>D=e.Dropdown]]},["cDcdfi","535agn","-i3PJS","l6BSGt","_qQcW3","Bf1Sux","d9h_j1","HbmgZZ","jSLlaY","2R4xv2","HKQFPT","pT-O8u","mjTUZq","PCbs_l","Jk5sjx","iuYvTO","WkP2XE","h74DsO","aunxON","x9N_Dh","BsnOle"]]);
